============================================================
Compare hallu_pos distributions: S vs G
============================================================
run_dir: /data/ruipeng.zhang/steering/src/pre_exp_llava/gen_llava-v1.5-7b_20260104_004851
K (positions compared): 200
min_denom(for ranking/z focus): 50

[TOTAL over token-positions]
  S: total_count=536, total_denom=96321, overall_rate=0.00556473
  G: total_count=4104, total_denom=96321, overall_rate=0.04260753
  count_diff(S-G)=-3568
  rate_diff(S-G)=-0.03704280

[Curve distance / similarity]
  mean(|rate_S-rate_G|) (unweighted) = 0.0230273295
  rmse(rate_S-rate_G)               = 0.0342421310
  weighted_mean(|rate diff|) by denom = 0.0370428048
  weighted_mean(rate diff) by denom   = -0.0370428048
  corr(rate_S, rate_G)               = 0.401114
  corr(count_S, count_G)             = 0.585208
  JS(count distribution) (lower=more similar) = 0.0677361338
  TV(count distribution)                     = 0.2715079573

[Shape / position summaries (by counts)]
  Peak rate position: S=113, G=5
  Peak count position: S=68, G=5
  Mean hallucination position (by count mass): S=60.784, G=45.720
  Quantiles (by count mass):
    S: q25=37, q50=62, q75=83
    G: q25=18, q50=43, q75=69

[Prefix segment summaries: prefix [1..b]]
  b= 10 | S_count=20     S_rate=0.00200000 | G_count=551    G_rate=0.05510000 | diff_count=-531   diff_rate=-0.05310000
  b= 20 | S_count=62     S_rate=0.00310000 | G_count=1147   G_rate=0.05735000 | diff_count=-1085  diff_rate=-0.05425000
  b= 50 | S_count=203    S_rate=0.00406016 | G_count=2400   G_rate=0.04800192 | diff_count=-2197  diff_rate=-0.04394176
  b=100 | S_count=473    S_rate=0.00532094 | G_count=3897   G_rate=0.04383873 | diff_count=-3424  diff_rate=-0.03851779
  b=200 | S_count=536    S_rate=0.00556473 | G_count=4104   G_rate=0.04260753 | diff_count=-3568  diff_rate=-0.03704280

------------------------------------------------------------
[TOP 20] by |rate diff| (filtered by denom >= 50)
pos | denomS denomG | countS countG | rateS rateG | dCount dRate | z p
  5 |   1000   1000 |      5    173 | 0.005000 0.173000 |   -168  -0.168000 | -13.193 0
  6 |   1000   1000 |      2    146 | 0.002000 0.146000 |   -144  -0.144000 | -12.301 0
 11 |   1000   1000 |      3     72 | 0.003000 0.072000 |    -69  -0.069000 |  -8.121 4.44e-16
  7 |   1000   1000 |      3     70 | 0.003000 0.070000 |    -67  -0.067000 |  -7.989 1.33e-15
 19 |   1000   1000 |      4     67 | 0.004000 0.067000 |    -63  -0.063000 |  -7.613 2.66e-14
 18 |   1000   1000 |      4     64 | 0.004000 0.064000 |    -60  -0.060000 |  -7.403 1.33e-13
 16 |   1000   1000 |     10     67 | 0.010000 0.067000 |    -57  -0.057000 |  -6.625 3.48e-11
  8 |   1000   1000 |      0     56 | 0.000000 0.056000 |    -56  -0.056000 |  -7.590 3.2e-14
 13 |   1000   1000 |      5     60 | 0.005000 0.060000 |    -55  -0.055000 |  -6.936 4.05e-12
 21 |   1000   1000 |      3     58 | 0.003000 0.058000 |    -55  -0.055000 |  -7.152 8.56e-13
 17 |   1000   1000 |      1     56 | 0.001000 0.056000 |    -55  -0.055000 |  -7.391 1.46e-13
 23 |   1000   1000 |      2     56 | 0.002000 0.056000 |    -54  -0.054000 |  -7.196 6.22e-13
 14 |   1000   1000 |      5     58 | 0.005000 0.058000 |    -53  -0.053000 |  -6.785 1.16e-11
 10 |   1000   1000 |      6     59 | 0.006000 0.059000 |    -53  -0.053000 |  -6.683 2.34e-11
 76 |    796    796 |      3     44 | 0.003769 0.055276 |    -41  -0.051508 |  -6.071 1.27e-09
 15 |   1000   1000 |      5     56 | 0.005000 0.056000 |    -51  -0.051000 |  -6.632 3.32e-11
 25 |   1000   1000 |      2     52 | 0.002000 0.052000 |    -50  -0.050000 |  -6.898 5.28e-12
 82 |    703    703 |      4     38 | 0.005690 0.054054 |    -34  -0.048364 |  -5.326 1e-07
 20 |   1000   1000 |      4     51 | 0.004000 0.051000 |    -47  -0.047000 |  -6.426 1.31e-10
 45 |   1000   1000 |      3     50 | 0.003000 0.050000 |    -47  -0.047000 |  -6.543 6.02e-11
------------------------------------------------------------
[TOP 20] by |count diff| (filtered by denom >= 50)
pos | denomS denomG | countS countG | rateS rateG | dCount dRate | z p
  5 |   1000   1000 |      5    173 | 0.005000 0.173000 |   -168  -0.168000 | -13.193 0
  6 |   1000   1000 |      2    146 | 0.002000 0.146000 |   -144  -0.144000 | -12.301 0
 11 |   1000   1000 |      3     72 | 0.003000 0.072000 |    -69  -0.069000 |  -8.121 4.44e-16
  7 |   1000   1000 |      3     70 | 0.003000 0.070000 |    -67  -0.067000 |  -7.989 1.33e-15
 19 |   1000   1000 |      4     67 | 0.004000 0.067000 |    -63  -0.063000 |  -7.613 2.66e-14
 18 |   1000   1000 |      4     64 | 0.004000 0.064000 |    -60  -0.060000 |  -7.403 1.33e-13
 16 |   1000   1000 |     10     67 | 0.010000 0.067000 |    -57  -0.057000 |  -6.625 3.48e-11
  8 |   1000   1000 |      0     56 | 0.000000 0.056000 |    -56  -0.056000 |  -7.590 3.2e-14
 13 |   1000   1000 |      5     60 | 0.005000 0.060000 |    -55  -0.055000 |  -6.936 4.05e-12
 17 |   1000   1000 |      1     56 | 0.001000 0.056000 |    -55  -0.055000 |  -7.391 1.46e-13
 21 |   1000   1000 |      3     58 | 0.003000 0.058000 |    -55  -0.055000 |  -7.152 8.56e-13
 23 |   1000   1000 |      2     56 | 0.002000 0.056000 |    -54  -0.054000 |  -7.196 6.22e-13
 10 |   1000   1000 |      6     59 | 0.006000 0.059000 |    -53  -0.053000 |  -6.683 2.34e-11
 14 |   1000   1000 |      5     58 | 0.005000 0.058000 |    -53  -0.053000 |  -6.785 1.16e-11
 15 |   1000   1000 |      5     56 | 0.005000 0.056000 |    -51  -0.051000 |  -6.632 3.32e-11
 25 |   1000   1000 |      2     52 | 0.002000 0.052000 |    -50  -0.050000 |  -6.898 5.28e-12
 45 |   1000   1000 |      3     50 | 0.003000 0.050000 |    -47  -0.047000 |  -6.543 6.02e-11
 20 |   1000   1000 |      4     51 | 0.004000 0.051000 |    -47  -0.047000 |  -6.426 1.31e-10
 26 |   1000   1000 |      2     46 | 0.002000 0.046000 |    -44  -0.044000 |  -6.428 1.29e-10
 12 |   1000   1000 |      1     45 | 0.001000 0.045000 |    -44  -0.044000 |  -6.563 5.26e-11
------------------------------------------------------------
[TOP 20] by |z| (two-prop z-test, denom >= 50)
pos | denomS denomG | countS countG | rateS rateG | dCount dRate | z p
  5 |   1000   1000 |      5    173 | 0.005000 0.173000 |   -168  -0.168000 | -13.193 0
  6 |   1000   1000 |      2    146 | 0.002000 0.146000 |   -144  -0.144000 | -12.301 0
 11 |   1000   1000 |      3     72 | 0.003000 0.072000 |    -69  -0.069000 |  -8.121 4.44e-16
  7 |   1000   1000 |      3     70 | 0.003000 0.070000 |    -67  -0.067000 |  -7.989 1.33e-15
 19 |   1000   1000 |      4     67 | 0.004000 0.067000 |    -63  -0.063000 |  -7.613 2.66e-14
  8 |   1000   1000 |      0     56 | 0.000000 0.056000 |    -56  -0.056000 |  -7.590 3.2e-14
 18 |   1000   1000 |      4     64 | 0.004000 0.064000 |    -60  -0.060000 |  -7.403 1.33e-13
 17 |   1000   1000 |      1     56 | 0.001000 0.056000 |    -55  -0.055000 |  -7.391 1.46e-13
 23 |   1000   1000 |      2     56 | 0.002000 0.056000 |    -54  -0.054000 |  -7.196 6.22e-13
 21 |   1000   1000 |      3     58 | 0.003000 0.058000 |    -55  -0.055000 |  -7.152 8.56e-13
 13 |   1000   1000 |      5     60 | 0.005000 0.060000 |    -55  -0.055000 |  -6.936 4.05e-12
 25 |   1000   1000 |      2     52 | 0.002000 0.052000 |    -50  -0.050000 |  -6.898 5.28e-12
 14 |   1000   1000 |      5     58 | 0.005000 0.058000 |    -53  -0.053000 |  -6.785 1.16e-11
 10 |   1000   1000 |      6     59 | 0.006000 0.059000 |    -53  -0.053000 |  -6.683 2.34e-11
 15 |   1000   1000 |      5     56 | 0.005000 0.056000 |    -51  -0.051000 |  -6.632 3.32e-11
 16 |   1000   1000 |     10     67 | 0.010000 0.067000 |    -57  -0.057000 |  -6.625 3.48e-11
 12 |   1000   1000 |      1     45 | 0.001000 0.045000 |    -44  -0.044000 |  -6.563 5.26e-11
 45 |   1000   1000 |      3     50 | 0.003000 0.050000 |    -47  -0.047000 |  -6.543 6.02e-11
 26 |   1000   1000 |      2     46 | 0.002000 0.046000 |    -44  -0.044000 |  -6.428 1.29e-10
 22 |   1000   1000 |      2     46 | 0.002000 0.046000 |    -44  -0.044000 |  -6.428 1.29e-10

[Denom decay check]
  denom at pos   1: S=1000, G=1000
  denom at pos   5: S=1000, G=1000
  denom at pos  10: S=1000, G=1000
  denom at pos  20: S=1000, G=1000
  denom at pos  50: S=999, G=999
  denom at pos 100: S=448, G=448
  denom at pos 200: S=0, G=0
